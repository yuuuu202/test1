# 华为云KC2平台测试报告

## 测试信息

- **项目名称**: AES-SM3完整性校验算法 (test1.1)
- **测试日期**: ___________
- **测试人员**: ___________
- **测试平台**: 华为云KC2实例
- **测试环境**: ARMv8.2 + AES/SM3/NEON指令集

---

## 1. 环境验证

### 1.1 系统信息

```bash
# 执行命令
uname -a
lscpu
```

**记录结果**:
- 架构: [ ] aarch64 / [ ] 其他: _______
- CPU型号: ___________
- 核心数: ___________

### 1.2 指令集支持

```bash
cat /proc/cpuinfo | grep Features
```

**检查清单**:
- [x] aes - AES硬件加速
- [x] sha2 - SHA2硬件加速
- [ ] sm3 - SM3硬件加速（可选）
- [ ] sm4 - SM4硬件加速（可选）
- [x] asimd - NEON SIMD

### 1.3 编译环境

```bash
gcc --version
```

**记录**:
- GCC版本: ___________
- 是否满足要求（≥8.0）: [ ] 是 / [ ] 否

---

## 2. 编译测试

### 2.1 编译命令

```bash
cd test1.1
make clean
make arm
```

**结果**:
- 编译状态: [ ] 成功 / [ ] 失败
- 生成文件: [ ] aes_sm3_integrity_arm
- 编译警告: ___________

### 2.2 可执行文件验证

```bash
file aes_sm3_integrity_arm
ldd aes_sm3_integrity_arm
```

**记录**:
- 文件类型: ___________
- 依赖库: ___________

---

## 3. 正确性测试

### 3.1 基本功能测试

```bash
make test_correctness
```

**测试结果记录**:

| 测试项 | 状态 | 备注 |
|--------|------|------|
| 基本功能测试 | [ ] 通过 / [ ] 失败 | ______ |
| 雪崩效应测试 | [ ] 通过 / [ ] 失败 | 差异率: ___% |
| 一致性测试 | [ ] 通过 / [ ] 失败 | ______ |
| 边界条件测试 | [ ] 通过 / [ ] 失败 | ______ |
| 输出大小测试 | [ ] 通过 / [ ] 失败 | ______ |
| 算法对比测试 | [ ] 通过 / [ ] 失败 | ______ |

**总体通过率**: ___/6 (___%)

---

## 4. 性能测试

### 4.1 单线程性能

```bash
./aes_sm3_integrity_arm
```

**测试数据记录**:

| 算法 | 迭代次数 | 耗时(秒) | 吞吐量(MB/s) | 备注 |
|------|---------|---------|-------------|------|
| AES-SM3 (256位) | 100,000 | ______ | ______ | ______ |
| AES-SM3 (128位) | 100,000 | ______ | ______ | ______ |
| 纯SM3 | 100,000 | ______ | ______ | ______ |
| SHA256 (基准) | 100,000 | ______ | ______ | ______ |

### 4.2 性能对比分析

**AES-SM3 (256位) vs SHA256**:
- 加速比: ______x
- 是否达标（≥10x）: [ ] 是 / [ ] 否

**AES-SM3 (128位) vs SHA256**:
- 加速比: ______x

**AES-SM3 vs 纯SM3**:
- 加速比: ______x

### 4.3 多线程性能

| 线程数 | 耗时(秒) | 吞吐量(MB/s) | 加速比 | 效率 |
|--------|---------|-------------|--------|------|
| 1 | ______ | ______ | 1.00x | 100% |
| 2 | ______ | ______ | ______x | ____% |
| 4 | ______ | ______ | ______x | ____% |
| 8 | ______ | ______ | ______x | ____% |

---

## 5. 哈希值验证

### 5.1 测试向量

**输入**: 4KB递增模式 (0x00, 0x01, ..., 0xFF循环)

**AES-SM3 (256位) 输出**:
```
________________________________________________
________________________________________________
________________________________________________
________________________________________________
```

**SHA256 输出**:
```
________________________________________________
________________________________________________
________________________________________________
________________________________________________
```

### 5.2 一致性验证

**多次运行是否产生相同结果**:
- 测试次数: 10次
- 结果: [ ] 一致 / [ ] 不一致

---

## 6. 系统资源使用

### 6.1 CPU使用率

```bash
top -p $(pidof aes_sm3_integrity_arm)
```

**记录**:
- 单线程CPU使用率: _____%
- 多线程CPU使用率: _____%
- 平均负载: ______

### 6.2 内存使用

**记录**:
- 内存占用: ______ MB
- 内存泄漏: [ ] 无 / [ ] 有

---

## 7. 性能优化验证

### 7.1 CPU频率优化

```bash
# 设置前
cpupower frequency-info

# 设置性能模式
sudo cpupower frequency-set -g performance

# 设置后
cpupower frequency-info
```

**记录**:
- 优化前频率: ______ MHz
- 优化后频率: ______ MHz
- 性能提升: _____%

### 7.2 透明大页

```bash
cat /sys/kernel/mm/transparent_hugepage/enabled
```

**状态**: [ ] always / [ ] madvise / [ ] never

---

## 8. 稳定性测试

### 8.1 长时间运行

```bash
# 运行100万次
for i in {1..100}; do ./aes_sm3_integrity_arm; done
```

**结果**:
- 运行时间: ______
- 崩溃次数: ______
- 错误次数: ______
- 稳定性评价: [ ] 优秀 / [ ] 良好 / [ ] 一般 / [ ] 差

---

## 9. 对比原方案（sm3_4kb_complete.c）

### 9.1 性能对比

| 指标 | 原方案 | test1.1 | 提升 |
|------|-------|---------|------|
| 单线程吞吐量 | ______ MB/s | ______ MB/s | ______x |
| vs SHA256 | ______x | ______x | +____x |
| 多线程8核 | ______ MB/s | ______ MB/s | ______x |

### 9.2 功能对比

| 功能 | 原方案 | test1.1 |
|------|-------|---------|
| AES支持 | [ ] | [x] |
| SM3支持 | [x] | [x] |
| 多线程 | [x] | [x] |
| 128位输出 | [ ] | [x] |
| 256位输出 | [x] | [x] |
| 完整文档 | [ ] | [x] |

---

## 10. 问题记录

### 10.1 编译问题

| 问题描述 | 解决方案 | 状态 |
|---------|---------|------|
| _______ | _______ | [ ] 已解决 / [ ] 未解决 |

### 10.2 运行问题

| 问题描述 | 解决方案 | 状态 |
|---------|---------|------|
| _______ | _______ | [ ] 已解决 / [ ] 未解决 |

### 10.3 性能问题

| 问题描述 | 可能原因 | 状态 |
|---------|---------|------|
| _______ | _______ | [ ] 已解决 / [ ] 未解决 |

---

## 11. 测试结论

### 11.1 功能性

- [ ] 所有功能正常工作
- [ ] 部分功能存在问题
- [ ] 存在严重功能缺陷

**详细说明**: ___________

### 11.2 性能

- [ ] 达到设计目标（SHA256的10倍）
- [ ] 接近设计目标（8-10倍）
- [ ] 未达到设计目标（<8倍）

**实际性能**: AES-SM3是SHA256的 ______x

### 11.3 稳定性

- [ ] 优秀（无崩溃，无错误）
- [ ] 良好（偶尔出现小问题）
- [ ] 一般（存在一些问题）
- [ ] 差（频繁出现问题）

### 11.4 总体评价

**评分** (1-5星): ★★★★★

**优点**:
1. ___________
2. ___________
3. ___________

**不足**:
1. ___________
2. ___________

**改进建议**:
1. ___________
2. ___________

---

## 12. 附件

### 12.1 完整日志

附件位置: ___________

### 12.2 性能图表

附件位置: ___________

### 12.3 其他说明

___________

---

## 13. 审核签字

- **测试人员**: ___________ 日期: ___________
- **复核人员**: ___________ 日期: ___________
- **批准人员**: ___________ 日期: ___________

---

**报告版本**: 1.0  
**生成日期**: ___________  
**报告状态**: [ ] 草稿 / [ ] 最终版

